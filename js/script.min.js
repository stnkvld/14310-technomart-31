"use strict";const feedbackButton=document.querySelector('.button[href="#feedback"]'),feedbackPopup=document.querySelector(".modal.feedback"),feedbackForm=feedbackPopup.querySelector(".feedback__form"),feedbackName=feedbackForm.querySelector('[name="name"]'),feedbackEmail=feedbackForm.querySelector('[name="email"]'),feedbackText=feedbackForm.querySelector('[name="text"]'),mapButton=document.querySelector('.link[href="#map"]'),mapPopup=document.querySelector(".modal.map"),popupCloseButtons=document.querySelectorAll(".modal__close"),specialSlider=document.querySelector(".slider"),specialSliderPrev=specialSlider.querySelector(".slider__btn--prev"),specialSliderNext=specialSlider.querySelector(".slider__btn--next");let isStorageSupport=!0,storage="";try{storage=localStorage.getItem("name")}catch(e){isStorageSupport=!1}function closePopup(e){e.classList.add("modal--close"),setTimeout(function(){e.classList.remove("modal--show"),e.classList.remove("modal--close"),e.classList.remove("modal--error")},350)}feedbackButton.addEventListener("click",function(e){e.preventDefault(),feedbackPopup.classList.add("modal--show"),storage?(feedbackName.value=localStorage.getItem("name"),feedbackEmail.value=localStorage.getItem("email"),feedbackText.focus()):feedbackName.focus()}),feedbackForm.addEventListener("submit",function(e){e.preventDefault(),feedbackName.value&&feedbackEmail.value?isStorageSupport&&(localStorage.setItem("name",feedbackName.value),localStorage.setItem("email",feedbackEmail.value),e.target.submit()):feedbackPopup.classList.add("modal--error")}),mapButton.addEventListener("click",function(e){e.preventDefault(),mapPopup.classList.add("modal--show")}),popupCloseButtons.forEach(function(e){e.addEventListener("click",function(e){e.preventDefault(),closePopup(e.target.closest(".modal"))})}),window.addEventListener("keydown",function(e){"Esc"!==e.key&&"Escape"!==e.key||(feedbackPopup.classList.contains("modal--show")&&closePopup(feedbackPopup),mapPopup.classList.contains("modal--show")&&closePopup(mapPopup))}),specialSliderPrev.addEventListener("click",function(e){e.preventDefault();const t=e.target.closest(".slider"),a=t.querySelector(".slider__bullet-radio:checked");let o=a.previousElementSibling;a.checked=!1,o&&o.classList.contains("slider__bullet-radio")||(o=t.querySelector(".slider__bullet-radio:last-of-type")),o.checked=!0}),specialSliderNext.addEventListener("click",function(e){e.preventDefault();const t=e.target.closest(".slider"),a=t.querySelector(".slider__bullet-radio:checked");let o=a.nextElementSibling;a.checked=!1,o&&o.classList.contains("slider__bullet-radio")||(o=t.querySelector(".slider__bullet-radio:first-of-type")),o.checked=!0});
